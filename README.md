# The Change in Coal's Share of Electricity Generation in US States, 2001-2019

## Summary
Coal use has trended downwards lately in the US, largely attributed to a rise 
in cheap natural gas and renewables. From 2001-2019, coal's share of total US
electricity generation has dropped by 54%. But has this decline happened evenly
 across the states? This repository contains a script to calculate the percent
 change of coal as a share of electricity generation by state from 2001-2019.
 Instructions are included to visualize this change in a map in QGIS.

## Input Data
One script (eia.api.looptest.py) and one input csv (eia_variables.csv).

## Instructions
Part 1: Importing Data via API and Calculating Percent Change

1. Download an API key from the EIA, if you do not already have one. This can
be done by accessing the following page on the EIA website:
https://www.eia.gov/opendata/register.php

2. Download the eia_variables.csv and epa_api_looptest.py files.

3. In the .py script, replace "YOUR_API_KEY" with your API key.

4. Run the script, and confirm that a percent_change.csv file was created.

Part 2: Visualizing the Data

1. Download a Shapefile of the US by state. The Census TIGER/Line Shapefiles are
an appropriate choice, available at:
https://www.census.gov/geographies/mapping-files/time-series/geo/tiger-line-file.html.

2. Import the shapefile into QGIS. Set a reasonable map projection, like
NAD 83 Conus Albers.

3. Import the percent_change.csv.

4. Run a spatial join on the shapefile Use percent_change as the join layer with
field_1 as the join field and   STUSPS as the target field.

5. Build a heat map. In the layer styling panel, choose Graduated Symbols and
select percent_change_percent change in coal, 2001-2019. Choose an appropriate
color ramp and use 5 equal interval classes.  

### Notes
1. The input csv can be modified to include additional input variables.  
ELEC.GEN.ALL-NY-99.A is the variable representing total annual electricity
generated in NY. The EIA database includes information about other generation
sources, including renewables like wind and solar. Replacing "ALL" with "WND"
 in the variable name will return total annual electricity generated by wind
 in NY. Replacing all the "COW"s with "WND"s would created a script that
 generated the percent change in generation from wind in this same time period.
  More information about other variables can be found at the EIA API webpage:
  https://www.eia.gov/opendata/qb.php

2. You may have noticed that Rhode Island and Vermont have been omitted.
These states do not have coal reserves or coal plants, so the EIA has no data
on coal generation for them. Massachusetts has also ended it's coal-powered
 electricity generation as of 2018.
